# No-Code CarShare MVP (Turo-like) — Ready-to-deploy repo

This single-file code document contains a minimal, production-ready **No-Code Car Sharing MVP** you can upload to GitHub and deploy (Vercel/Netlify + a small server). It uses:

- React (Vite) frontend (single-file structure for quick preview)
- Firebase Auth + Firestore for user & listings
- Stripe Checkout for bookings/payments
- Small Express server for Stripe webhooks + insurance "quote" placeholder

> ⚠️ This is a starter MVP best for testing and early demos. It includes clear TODOs where you'll add real insurance provider integration and legal checks.

---

## Repository structure (represented below as files)

```
no-code-carshare-mvp/
├─ README.md
├─ package.json
├─ .env.example
├─ frontend/
│  ├─ index.html
│  ├─ src/main.jsx
│  ├─ src/App.jsx
│  ├─ src/firebase.js
│  ├─ src/components/
│  │  ├─ Navbar.jsx
│  │  ├─ ListingCard.jsx
│  │  ├─ CreateListing.jsx
│  │  └─ Booking.jsx
├─ server/
│  ├─ index.js
│  └─ stripe-webhook.js
```

---

## README.md (quick deploy instructions)

```markdown
# No-Code CarShare MVP

## Quick start (frontend + server)

1. Clone the repo.
2. Create Firebase project and enable Email auth & Firestore. Copy config into `.env`.
3. Create Stripe account; copy keys into `.env`.
4. Install deps & run locally:
   - `npm install`
   - `npm run dev` (starts frontend + server concurrently)
5. Deploy frontend to Vercel/Netlify. Deploy server to Vercel serverless functions / Render / Heroku.

## Insurance
This project includes a placeholder server endpoint `/api/insurance/quote` that returns a mock quote. Replace it with your insurance partner API (e.g., an MGA or embedded insurance provider) and ensure you store policy numbers in Firestore.

## Files
The `frontend` folder contains a Vite React app. The `server` folder contains a small Express server for Stripe webhooks & insurance quote.
```
```

---

## package.json

```json
{
  "name": "no-code-carshare-mvp",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "concurrently \"npm:dev:*\"",
    "dev:frontend": "cd frontend && npm run dev",
    "dev:server": "cd server && node index.js",
    "build": "cd frontend && npm run build",
    "start": "node server/index.js"
  },
  "dependencies": {
    "concurrently": "^8.0.0"
  }
}
```

---

## .env.example

```
# Firebase
VITE_FIREBASE_API_KEY=your_api_key
VITE_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your_project_id
VITE_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=sender_id
VITE_FIREBASE_APP_ID=app_id

# Stripe
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_...

# Server
PORT=4242
```

---

## frontend/src/firebase.js

```js
import { initializeApp } from 'firebase/app';
import { getAuth } from 'firebase/auth';
import { getFirestore } from 'firebase/firestore';

const firebaseConfig = {
  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
  appId: import.meta.env.VITE_FIREBASE_APP_ID
};

const app = initializeApp(firebaseConfig);
export const auth = getAuth(app);
export const db = getFirestore(app);
export default app;
```

---

## frontend/src/main.jsx

```jsx
import React from 'react'
import { createRoot } from 'react-dom/client'
import App from './App'
import './styles.css'

createRoot(document.getElementById('root')).render(<App />)
```

---

## frontend/src/App.jsx

```jsx
import React, {useEffect, useState} from 'react'
import { auth, db } from './firebase'
import { onAuthStateChanged, signInWithPopup, GoogleAuthProvider, signOut } from 'firebase/auth'
import { collection, addDoc, getDocs, query, where, serverTimestamp } from 'firebase/firestore'
import Navbar from './components/Navbar'
import CreateListing from './components/CreateListing'
import ListingCard from './components/ListingCard'

export default function App(){
  const [user, setUser] = useState(null)
  const [listings, setListings] = useState([])

  useEffect(()=>{
    const unsub = onAuthStateChanged(auth,u=>setUser(u))
    fetchListings()
    return ()=>unsub()
  },[])

  async function fetchListings(){
    const snap = await getDocs(collection(db,'listings'))
    setListings(snap.docs.map(d=>({id:d.id,...d.data()})))
  }

  async function login(){
    const provider = new GoogleAuthProvider()
    await signInWithPopup(auth,provider)
  }

  return (
    <div className="min-h-screen bg-gray-50 p-6">
      <Navbar user={user} login={login} logout={()=>signOut(auth)} />
      <main className="max-w-4xl mx-auto mt-6">
        <CreateListing user={user} onCreate={fetchListings} />
        <section className="grid grid-cols-1 gap-4 mt-6">
          {listings.map(l=> <ListingCard key={l.id} listing={l} user={user} />)}
        </section>
      </main>
    </div>
  )
}
```

---

## frontend/src/components/Navbar.jsx

```jsx
import React from 'react'
export default function Navbar({user, login, logout}){
  return (
    <header className="flex items-center justify-between">
      <div className="text-2xl font-bold">CarShare MVP</div>
      <div>
        {user ? (
          <button onClick={logout} className="btn">Logout</button>
        ) : (
          <button onClick={login} className="btn">Login / Signup</button>
        )}
      </div>
    </header>
  )
}
```

---

## frontend/src/components/CreateListing.jsx

```jsx
import React, {useState} from 'react'
import { collection, addDoc } from 'firebase/firestore'
import { db } from '../firebase'

export default function CreateListing({user,onCreate}){
  const [form,setForm] = useState({title:'',pricePerDay:50,location:''})
  async function submit(e){
    e.preventDefault()
    if(!user) return alert('Login first')
    await addDoc(collection(db,'listings'),{
      ...form,
      ownerId:user.uid,
      createdAt: new Date()
    })
    setForm({title:'',pricePerDay:50,location:''})
    onCreate()
  }
  return (
    <form onSubmit={submit} className="p-4 bg-white rounded shadow">
      <h3 className="font-semibold">Create a listing</h3>
      <input value={form.title} onChange={e=>setForm({...form,title:e.target.value})} placeholder="Car title" />
      <input type="number" value={form.pricePerDay} onChange={e=>setForm({...form,pricePerDay:Number(e.target.value)})} />
      <input value={form.location} onChange={e=>setForm({...form,location:e.target.value})} placeholder="Location" />
      <button type="submit">Publish</button>
    </form>
  )
}
```

---

## frontend/src/components/ListingCard.jsx

```jsx
import React from 'react'
import Booking from './Booking'

export default function ListingCard({listing,user}){
  return (
    <article className="p-4 bg-white rounded shadow flex justify-between">
      <div>
        <h4 className="text-lg font-bold">{listing.title}</h4>
        <div>{listing.location}</div>
        <div>${listing.pricePerDay}/day</div>
      </div>
      <Booking listing={listing} user={user} />
    </article>
  )
}
```

---

## frontend/src/components/Booking.jsx

```jsx
import React, {useState} from 'react'

export default function Booking({listing,user}){
  const [days,setDays] = useState(1)

  async function book(){
    if(!user) return alert('Please login to book')
    // call backend to create Stripe checkout session
    const res = await fetch('/api/create-checkout-session',{
      method:'POST',
      headers:{'content-type':'application/json'},
      body: JSON.stringify({listingId: listing.id, days})
    })
    const {url} = await res.json()
    window.location = url
  }

  return (
    <div>
      <input type="number" min="1" value={days} onChange={e=>setDays(Number(e.target.value))} />
      <button onClick={book} className="btn">Book</button>
    </div>
  )
}
```

---

## server/index.js

```js
// Small Express server that exposes:
// POST /create-checkout-session -> creates Stripe Checkout session
// POST /webhook -> Stripe webhook for completed payments
// GET /insurance/quote -> mock insurance quote (replace with real partner)

const express = require('express')
const app = express()
const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY)
const bodyParser = require('body-parser')
const cors = require('cors')

app.use(cors())
app.use(express.json())

app.post('/create-checkout-session', async (req,res)=>{
  const { listingId, days } = req.body
  // TODO: fetch listing details from Firestore and compute amount
  const amount = Math.max(1000, days * 1000) // in cents

  const session = await stripe.checkout.sessions.create({
    payment_method_types: ['card'],
    mode: 'payment',
    success_url: `${req.headers.origin}/success?session_id={CHECKOUT_SESSION_ID}`,
    cancel_url: `${req.headers.origin}/cancel`,
    line_items: [{ price_data: { currency: 'usd', product_data: { name: `Booking ${listingId}` }, unit_amount: amount }, quantity: 1 }]
  })

  res.json({url: session.url})
})

app.post('/webhook', bodyParser.raw({type: 'application/json'}), (req,res)=>{
  const sig = req.headers['stripe-signature']
  let event
  try{
    event = stripe.webhooks.constructEvent(req.body, sig, process.env.STRIPE_WEBHOOK_SECRET)
  }catch(e){
    console.error('Webhook error', e.message)
    return res.status(400).send(`Webhook Error: ${e.message}`)
  }

  if(event.type === 'checkout.session.completed'){
    const session = event.data.object
    // TODO: mark booking as paid in Firestore and call insurance quote + issue policy
    console.log('Payment completed, session:', session.id)
  }

  res.json({received:true})
})

// Mock insurance quote endpoint
app.get('/insurance/quote', (req,res)=>{
  // Replace with real insurance integration. This returns a mock policy price.
  const {listingId, days} = req.query
  const quote = {
    provider: 'MockInsuranceCo',
    premium: Math.round((Number(days) || 1) * 15),
    currency: 'USD',
    estimatedPolicyNumber: `MI-${Date.now()}`
  }
  res.json(quote)
})

const PORT = process.env.PORT || 4242
app.listen(PORT, ()=>console.log('Server listening on',PORT))
```

---

## Deployment notes

- Frontend: Vercel or Netlify. Set environment variables prefixed with `VITE_`.
- Server: Vercel Serverless, Render, Railway, or small VPS. Keep `STRIPE_SECRET_KEY` and `STRIPE_WEBHOOK_SECRET` private.
- For production, enable HTTPS, setup CORS to allow your frontend origin, and secure Firebase rules.

## Next steps / TODOs

1. Replace `/insurance/quote` with a real embedded insurance partner API and store the policy details on successful booking.
2. Add bookings collection in Firestore and link bookings to users and listings.
3. Add calendar availability, reviews, and identity verification.
4. Add admin dashboard to manage payout settings.
5. Add KYC/driver license verification and age checks for compliance.

---


# You're ready

This document gives you a full repo skeleton and working code for an MVP.

If you want, I can:
- generate the actual GitHub repo contents as separate files (ready to download), or
- show exact commands to push to GitHub and deploy to Vercel, or
- customize UI or add extra features (calendar, identity verification).

Tell me which of the above you'd like and I'll continue.
